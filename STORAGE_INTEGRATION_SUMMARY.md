# üéØ –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ - Local + Google Drive Storage

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **–ú–æ–¥—É–ª—å storage.py**
- ‚úÖ `LocalStorage` –∫–ª–∞—Å—Å –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `HEDGE.BOT.HISTORY/{TICKER}/`
- ‚úÖ `DriveStorage` –∫–ª–∞—Å—Å —Å Service Account –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º ID
- ‚úÖ Retry –º–µ—Ö–∞–Ω–∏–∑–º —Å exponential backoff
- ‚úÖ Graceful fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö Drive

### 2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ get_hedge_entry_generator.py**
- ‚úÖ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `save_to_file()`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤: `{TICKER}_{1h-4h-1d}_{HHMMSS}_{YYYYMMDD}.txt`
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ Google Drive
- ‚úÖ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –∞–Ω–∞–ª–∏–∑–∞

### 3. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `requirements.txt` —Å Google API –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏  
- ‚úÖ –°–æ–∑–¥–∞–Ω `.env.example` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `GDRIVE_SETUP.md`

### 4. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã**
- ‚úÖ `migrate_storage.py` - –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ `compression_manager.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∂–∞—Ç–∏–µ–º —Ñ–∞–π–ª–æ–≤

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Drive (Summary)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env):
```bash
GDRIVE_UPLOAD=0                                           # 1=–≤–∫–ª—é—á–∏—Ç—å, 0=—Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ
GDRIVE_SA_JSON=/path/to/service-account.json             # –ø—É—Ç—å –∫ JSON –∫–ª—é—á—É
GDRIVE_PARENT_ID=                                         # ID –ø–∞–ø–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  
GDRIVE_CACHE=.gdrive_cache.json                          # –∫—ç—à ID –ø–∞–ø–æ–∫
```

### –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:
1. **Google Cloud Console** ‚Üí —Å–æ–∑–¥–∞—Ç—å Service Account ‚Üí —Å–∫–∞—á–∞—Ç—å JSON
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env** —Å –ø—É—Ç–µ–º –∫ JSON –∏ `GDRIVE_UPLOAD=1`
3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `pip install -r requirements.txt`
4. **–¢–µ—Å—Ç**: –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª—é–±–æ–π –∞–Ω–∞–ª–∏–∑ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Drive

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### **–°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è):
```
HISTORY/
‚îú‚îÄ‚îÄ AVAXUSDT_1h-4h-1d_003017_20251001.txt
‚îú‚îÄ‚îÄ BTCUSDT_1h-4h-1d_003009_20251001.txt
‚îî‚îÄ‚îÄ ...(~372 —Ñ–∞–π–ª–∞)
```

### **–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):
```
HEDGE.BOT.HISTORY/
‚îú‚îÄ‚îÄ AVAXUSDT/
‚îÇ   ‚îî‚îÄ‚îÄ AVAXUSDT_1h-4h-1d_101731_20251001.txt
‚îú‚îÄ‚îÄ BTCUSDT/
‚îÇ   ‚îî‚îÄ‚îÄ BTCUSDT_1h-4h-1d_101732_20251001.txt
‚îî‚îÄ‚îÄ TESTUSDT/
    ‚îî‚îÄ‚îÄ TEST_1h-4h-1d_003000_20251001.txt
```

### **Google Drive** (–∑–µ—Ä–∫–∞–ª–æ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã):
```
My Drive/HEDGE.BOT.HISTORY/
‚îú‚îÄ‚îÄ AVAXUSDT/
‚îÇ   ‚îî‚îÄ‚îÄ AVAXUSDT_1h-4h-1d_101731_20251001.txt
‚îú‚îÄ‚îÄ BTCUSDT/  
‚îÇ   ‚îî‚îÄ‚îÄ BTCUSDT_1h-4h-1d_101732_20251001.txt
‚îî‚îÄ‚îÄ ...
```

---

## üöÄ –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### **‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:**
- [x] –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- [x] Google Drive –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏)
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–∏ –∞–Ω–∞–ª–∏–∑–∞
- [x] –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º
- [x] Graceful fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### **‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º:**
- [ ] Service Account JSON (—Å–ª–µ–¥—É–π—Ç–µ `GDRIVE_SETUP.md`)
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: `pip install -r requirements.txt`

### **üìã –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤: `python migrate_storage.py`
- [ ] –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Å–∂–∞—Ç–∏—è: —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ `save_to_file()`
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –ø–∞–ø–∫–∏ –Ω–∞ Drive

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### **1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):**
```bash
# –°–∏—Å—Ç–µ–º–∞ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ª–æ–∫–∞–ª—å–Ω–æ
# –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ HEDGE.BOT.HISTORY/{TICKER}/
```

### **2. –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è Google Drive:**
1. –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º `GDRIVE_SETUP.md` (—Å–æ–∑–¥–∞–Ω–∏–µ Service Account)
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env` —Å `GDRIVE_UPLOAD=1`  
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install google-api-python-client google-auth`

### **3. –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ (–ø–æ –∂–µ–ª–∞–Ω–∏—é):**
```bash
python migrate_storage.py  # –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
# –∏–ª–∏
MIGRATE_OLD_HISTORY=1 python migrate_storage.py  # –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

---

## üìä –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –¥–æ **56 —Ç–∏–∫–µ—Ä–æ–≤**:
- **–§–∞–π–ª–æ–≤ –≤ –¥–µ–Ω—å**: 5,376 (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç)
- **–†–∞–∑–º–µ—Ä –≤ –≥–æ–¥**: ~5.4 –ì–ë —Ç–µ–∫—Å—Ç–∞ –∏–ª–∏ ~2.0 –ì–ë —Å–∂–∞—Ç–æ–≥–æ
- **Google Drive**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–õ–æ–∫–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –∫–∞–∂–¥—ã–π —Ç–∏–∫–µ—Ä –≤ —Å–≤–æ–µ–π –ø–∞–ø–∫–µ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ Service Account (–Ω–µ OAuth)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ Credentials –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ª–æ–≥–∏  
- ‚úÖ Graceful fallback –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å Drive
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

**üéâ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ, Google Drive - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.