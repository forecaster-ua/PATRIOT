# PATRIOT Trading System v2.0 - Dual Process Architecture

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞:

### 1. üéº **Ticker Monitor** (`ticker_monitor.py`)
- **–§—É–Ω–∫—Ü–∏—è**: –ü–æ–∏—Å–∫ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- **–ó–∞–¥–∞—á–∏**:
  - –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–∫–µ—Ä–æ–≤ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
  - –ê–Ω–∞–ª–∏–∑ —Å–∏–≥–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ `signal_analyzer.py`
  - –†–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ `order_executor.py`
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ä–¥–µ—Ä–æ–≤ –≤ Orders Watchdog –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### 2. üêï **Orders Watchdog** (`orders_watchdog.py`)
- **–§—É–Ω–∫—Ü–∏—è**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤
- **–ó–∞–¥–∞—á–∏**:
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
  - –ü—Ä–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ SL/TP
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –æ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏—è—Ö
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ñ–∞–π–ª—ã –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
ticker_monitor.py
      ‚Üì (–Ω–∞—Ö–æ–¥–∏—Ç —Å–∏–≥–Ω–∞–ª)
signal_analyzer.py  
      ‚Üì (–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç)
order_executor.py
      ‚Üì (—Ä–∞–∑–º–µ—â–∞–µ—Ç –ª–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä)
orders_watchdog.py
      ‚Üì (–º–æ–Ω–∏—Ç–æ—Ä–∏—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ)
[–û–†–î–ï–† –ò–°–ü–û–õ–ù–ï–ù] ‚Üí —Ä–∞–∑–º–µ—â–∞–µ—Ç SL/TP ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
```

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
./start_patriot.sh    # Linux/Mac
start_patriot.bat     # Windows
```

### –†–∞–∑–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
# –ó–∞–ø—É—Å–∫ Orders Watchdog
./watchdog.sh start

# –ó–∞–ø—É—Å–∫ Ticker Monitor
python3 ticker_monitor.py
```

## üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

### Orders Watchdog
```bash
./watchdog.sh start     # –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
./watchdog.sh stop      # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
./watchdog.sh restart   # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./watchdog.sh status    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./watchdog.sh logs      # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```

### Ticker Monitor
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –æ–∫–Ω–µ
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Ctrl+C`
- –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç)

## üìÅ –§–∞–π–ª—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è

### Orders Watchdog
- `orders_watchdog_state.json` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
- `orders_watchdog_requests.json` - –æ—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç order_executor
- `orders_watchdog.pid` - PID –ø—Ä–æ—Ü–µ—Å—Å–∞

### –õ–æ–≥–∏
- `logs/signals.log` - –æ—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
- `logs/orders_watchdog.log` - –ª–æ–≥–∏ Orders Watchdog (–ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ ./watchdog.sh)

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **üîÑ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞**: –ü–æ–∏—Å–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –æ—Ä–¥–µ—Ä–æ–≤
2. **üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ–∑–∞–≤–∏—Å–∏–º, —Å–±–æ–π –æ–¥–Ω–æ–≥–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–π
3. **üì± –ü–æ–ª–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –í—Å–µ —Å–æ–±—ã—Ç–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∏ —Å–æ–æ–±—â–∞—é—Ç—Å—è –≤ Telegram
4. **üíæ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**: –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, —Å–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
5. **üîß –ì–∏–±–∫–æ—Å—Ç—å**: –ü—Ä–æ—Ü–µ—Å—Å—ã –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
./test_integration.sh  # –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Orders Watchdog –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
./watchdog.sh logs

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
./watchdog.sh status

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
./watchdog.sh stop
./watchdog.sh start
```

### Ticker Monitor –Ω–µ –≤–∏–¥–∏—Ç –æ—Ä–¥–µ—Ä–∞
1. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Orders Watchdog –∑–∞–ø—É—â–µ–Ω: `./watchdog.sh status`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª –∑–∞–ø—Ä–æ—Å–æ–≤: `cat orders_watchdog_requests.json`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `tail -f logs/signals.log`

### –û—Ä–¥–µ—Ä–∞ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `order_executor.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–π API
2. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ñ–∞–π–ª `orders_watchdog_requests.json` —Å–æ–∑–¥–∞–µ—Ç—Å—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Orders Watchdog

## üìû –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

### Orders Watchdog –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
- üêï –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ watchdog
- üëÅÔ∏è –ù–∞—á–∞–ª–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Ä–¥–µ—Ä–∞
- üéâ –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞
- üöÄ –ü–æ–ª–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (—Å SL/TP)
- üö´ –û—Ç–º–µ–Ω–∞ –æ—Ä–¥–µ—Ä–æ–≤
- üö® –û—à–∏–±–∫–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è SL/TP

### Ticker Monitor –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
- üìã –†–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
- ‚ùå –û—à–∏–±–∫–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
- üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ `config.py`:
- `RISK_PERCENT` - –ø—Ä–æ—Ü–µ–Ω—Ç –∫–∞–ø–∏—Ç–∞–ª–∞ –Ω–∞ —Å–¥–µ–ª–∫—É
- `FUTURES_LEVERAGE` - –ø–ª–µ—á–æ
- `FUTURES_MARGIN_TYPE` - —Ç–∏–ø –º–∞—Ä–∂–∏ (CROSS/ISOLATED)

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–∞:
1. **ticker_monitor** –∏—â–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
2. –ü—Ä–∏ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–∏ —Å–∏–≥–Ω–∞–ª–∞ —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –ª–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä
3. **orders_watchdog** –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞
4. –ü—Ä–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è SL/TP
5. –í—Å–µ —Å–æ–±—ã—Ç–∏—è —Å–æ–æ–±—â–∞—é—Ç—Å—è –≤ Telegram
6. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7 –±–µ–∑ —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
